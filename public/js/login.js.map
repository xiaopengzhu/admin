{"version":3,"sources":["webpack:///webpack/bootstrap d2aa144a7c923245c036?3be9*","webpack:///./resources/assets/js/login/login.js","webpack:///./resources/assets/js/login/service.js"],"names":[],"mappings":"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","file":"login.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap d2aa144a7c923245c036\n **/","import login from './service';\r\n\r\nlogin.submit();//侦听登录按钮的点击事件\r\nlogin.prelogin();//取得一次性的密钥\r\n\r\n\r\n$(function(){\r\n    $('.login-form').keyup(function(event){\r\n        if (event.keyCode == 13) {\r\n            $('#submit').trigger('click');\r\n        }\r\n    });\r\n});\n\n\n/** WEBPACK FOOTER **\n ** ./resources/assets/js/login/login.js\n **/","/** login */\r\nlet cache_publickey_str = 'publickey';\r\nlet loading_image = '<img width=\"18\" src=\"images/loading-icons/loading7.gif\">';\r\nlet login_form_obj = $('#login-form');\r\nlet msg_obj = $('#msg');\r\nlet submit_obj = $('#submit');\r\nlet loading_obj = $('#loading');\r\n\r\nlet $_GET = (function(){\r\n    let url = window.document.location.href.toString();\r\n    let u = url.split(\"?\");\r\n    if(typeof(u[1]) == \"string\"){\r\n        u = u[1].split(\"&\");\r\n        let get = {};\r\n        for(let i in u){\r\n            let j = u[i].split(\"=\");\r\n            get[j[0]] = j[1];\r\n        }\r\n        return get;\r\n    } else {\r\n        return {};\r\n    }\r\n})();\r\n\r\n//登录\r\nfunction login(username, password) {\r\n    $.ajax({\r\n        type: \"get\",\r\n        url: \"/login/proc\",\r\n        data: {username:username,password:password},\r\n        dataType: \"jsonp\",\r\n        jsonp: \"callback\",\r\n        jsonpCallback:\"callback\",\r\n        headers: {\r\n            'X-XSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\r\n        },\r\n        success: function(data) {\r\n            if(!data.result) {\r\n                prelogin(true);\r\n            }\r\n            msg_obj.html(data.msg).show();\r\n            if(data.result && typeof data.jumpUrl != 'undefined') {\r\n                window.location.href = data.jumpUrl;\r\n            }else if(data.result) {\r\n                window.location.href = '/';\r\n            }\r\n        },\r\n        beforeSend: function() {\r\n            submit_obj.html(loading_image);\r\n        },\r\n        timeout: 30000,\r\n        complete: function(request, status) {\r\n            if(status == 'timeout') {\r\n                msg_obj.html('登录超时，请重试！');\r\n            }\r\n            submit_obj.html('登陆');\r\n        }\r\n    });\r\n}\r\n\r\n//登录前处理\r\nfunction prelogin(is_show_loading) {\r\n    $.ajax({\r\n        type: \"get\",\r\n        url: \"/login/prelogin\",\r\n        data: \"\",\r\n        dataType: \"jsonp\",\r\n        jsonp: \"callback\",\r\n        jsonpCallback:\"callback\",\r\n        success: function(data) {\r\n            $('input').attr('disabled', false);\r\n            //确保正确返回了数据才会显示登录框\r\n            if( ! is_show_loading) {\r\n                msg_obj.hide();\r\n                loginForm(true);\r\n            }\r\n            submit_obj.data(cache_publickey_str, data.pKey);\r\n            $('meta[name=\"csrf-token\"]').attr('content', data.a);\r\n        },\r\n        beforeSend: function() {\r\n            msg_obj.html('处理中...').show();\r\n            $('input').attr('disabled', true);\r\n            if( ! is_show_loading) {\r\n                loginForm(false);\r\n            }\r\n        },\r\n        timeout: 10000,\r\n        complete: function(request, status) {\r\n            if(status == 'timeout') {\r\n                //todo\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\n//登录框的显示与隐藏\r\nfunction loginForm(show_or_hide) {\r\n    if(!show_or_hide) {\r\n        login_form_obj.hide();\r\n        loading_obj.show()\r\n    } else {\r\n        login_form_obj.show();\r\n        loading_obj.hide();\r\n    }\r\n}\r\n\r\n//侦听登录的点击事件\r\nfunction submit() {\r\n    submit_obj.on('click', function() {\r\n        let username = $('#username').val();\r\n        let password = $('#password').val();\r\n        if(username == '') {\r\n            msg_obj.html('请输入用户名').show();\r\n            return false;\r\n        }\r\n        if(password == '') {\r\n            msg_obj.html('请输入密码').show();\r\n            return false;\r\n        }\r\n        password = CryptoJS.MD5(password);\r\n        let publickey = submit_obj.data(cache_publickey_str);\r\n        if(typeof publickey == 'undefined') {\r\n            msg_obj.html('登录失败，非法操作。');\r\n            return false;\r\n        }\r\n        password = password + publickey;\r\n        password = (\"\"+CryptoJS.MD5(password)).toUpperCase();\r\n        login(username, password);\r\n    });\r\n}\r\n\r\n/*\r\nreturn {\r\n    login:login,\r\n    prelogin:prelogin,\r\n    submit:submit\r\n}*/\r\n\r\nexport default {\r\n    login,\r\n    prelogin,\r\n    submit\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./resources/assets/js/login/service.js\n **/"],"sourceRoot":""}